## **`Initial Date`**
Apr 25, 2022
<br>

### **`Author`**

        Abdias Natanael Vrech
        Tel. +34 681 93 54 92
        Ontinyent, Valencia, SP
        email: abdias.dev@gmail.com
___
## README to [Compile Obfuscated APK](#https://github.com/ClaudiuGeorgiu/Obfuscapk) üîß

Index:
- [Instal Obfuscate Library](#install-and-set-obfuscate-apk)
- [Clone Repo](#clone-repo)
- [Obfuscate APK](#obfuscate-apk)
- [Extract APK](#extract-apk)
- [Sign APK](#apk-is-signed-with-new-credentials)

___
<br>

## Install and set Obfuscate APK
### Download and install

- [Docker](#https://docs.docker.com/get-docker/) üê≥
- [Git Bash](#https://git-scm.com/downloads) üöÄ
- [Phyton](#https://www.python.org/downloads/) ‚úÇÔ∏è
___
<br>

### Clone Repo
```
git clone https://github.com/ClaudiuGeorgiu/Obfuscapk.git
```

Download `Docker Image`
```
docker pull claudiugeorgiu/obfuscapk
```

Enter in the `src` folder
```
cd Obfuscapk/src/
```
Then run && install all the dependencies
```
docker build -t obfuscapk .
```

When the Docker image is ready, make a quick test to check that everything was installed correctly:
```
winpty docker run --rm -it obfuscapk --help
```
___
<br>

## Obfuscate APK
Build APK with [Sign Credentials](#apk-is-signed-with-new-credentials)

Using `Git Bash`, locate in `app/release` inside Project's Folder to do the job on the desired `filename.apk`
```
cd ../{{project}}/{{branch}}/app/release
```

Obfuscate `filename.apk`
##### _(change `filename` to the correspondig apk file name)_
##### _(this will take a time to run, so be patient)_
```
winpty docker run --rm -it -u $(id -u):$(id -g) -v "${PWD}":"/workdir" obfuscapk -o MethodOverload -o Reorder -o MethodRename -o RandomManifest -o ClassRename -o Reflection -o AdvancedReflection -o ArithmeticBranch -o CallIndirection -o ConstStringEncryption -o DebugRemoval -o FieldRename -o Goto -o LibEncryption -o Rebuild filename.apk -p -d filename_ofuscated.apk --keystore-file telynetAndroidObfuscated.keystore --keystore-password 'sHS$iIYJ!wcT%5QP' --key-alias telynetandroid_obfuscated
```

The meaning of each parameter is:
* `-o ` indicates the method to use to Obfuscate, can be added as much as you want 

* `-w DIR` is used to set the working directory where to save the intermediate files
(generated by `apktool`). If not specified, a directory named `obfuscation_working_dir`
is created in the same directory as the input application. This can be useful for
debugging purposes, but if it's not needed it can be set to a temporary directory
(e.g., `-w /tmp/`).

* `-d OUT_APK_OR_AAB` is used to set the path of the destination file: the apk file
generated by the obfuscation process (e.g., `-d /home/user/Desktop/obfuscated.apk` or
`-d /home/user/Desktop/obfuscated.aab`). If not specified, the final obfuscated file
will be saved inside the working directory. Note: existing files will be overwritten
without any warning.

* `-p` is a flag for showing progress bars during the obfuscation operations. When
using the tool in batch operations/automatic builds it's convenient to have progress
bars disabled, otherwise this flag should be enabled to see the obfuscation progress.

* `--keystore-file KEYSTORE_FILE`, `--keystore-password KEYSTORE_PASSWORD`,
`--key-alias KEY_ALIAS` and `--key-password KEY_PASSWORD` can be used to specify a
custom keystore (needed for the apk signing). If `--keystore-file` is used,
`--keystore-password` and `--key-alias` must be specified too, while `--key-password`
is needed only if the chosen key has a different password from the keystore password.
By default (when `--keystore-file` is not specified), a
[keystore bundled with Obfuscapk](https://github.com/ClaudiuGeorgiu/Obfuscapk/blob/master/src/obfuscapk/resources/obfuscation_keystore.jks)
is used for the signing operations.

* `--use-aapt2` is a flag for using aapt2 option when rebuilding an app with `apktool`.
___
<br>

### Extract APK
Once `obfuscapk` run finishes, a new obfuscated apk with the same `filename` + `_obfuscated` will be created:
```
filename_obfuscated.apk
```
___
<br>

### Apk is signed with new credentials
<br>

#### **Key File**:
```
../{{project}}/{{branch}}/telynetAndroidObfuscated.keystore
```
#### **Key Alias**:
```
telynetandroid_obfuscated
```
#### **Key Password**:
```
sHS$iIYJ!wcT%5QP
``` 